<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Connect 4 - Merry Edition</title>
  <style>
    :root {
      --cell-size: 64px;
    }

    * {
      user-select: none;
      -webkit-user-drag: none;
    }

    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      gap: 20px;
      margin: 0;
      padding: 0;
      background: #f4f6f8;
    }

    .banner {
      width: 100%;
      max-height: 120px;
      overflow: hidden;
    }

    .banner img {
      width: 100%;
      height: auto;
      display: block;
      object-fit: cover;
    }

    .main {
      display: flex;
      flex-wrap: wrap;
      gap: 24px;
      justify-content: center;
      align-items: flex-start;
      padding: 20px;
      max-width: 1000px;
      width: 100%;
    }

    .panel {
      display: flex;
      flex-direction: column;
      gap: 12px;
      flex: 1 1 300px;
      max-width: 350px;
    }

    .board-wrap {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
      flex: 1 1 380px;
    }

    .top-row {
      display: grid;
      grid-template-columns: repeat(7, var(--cell-size));
      gap: 8px;
      justify-items: center;
      min-height: var(--cell-size);
    }

    .top-cell {
      width: var(--cell-size);
      height: var(--cell-size);
      border-radius: 50%;
      background: #e9eef5;
      border: 2px dashed #c6d0df;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }

    .board {
      display: grid;
      grid-template-columns: repeat(7, var(--cell-size));
      grid-auto-rows: var(--cell-size);
      gap: 8px;
      padding: 8px;
      background: linear-gradient(180deg, #2b6ea3, #1b4f78);
      border-radius: 12px;
      box-shadow: 0 6px 18px rgba(0, 0, 0, 0.15);
    }

    .cell {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .slot {
      width: 84%;
      height: 84%;
      border-radius: 50%;
      background: #e1eefc;
      box-shadow: inset 0 -6px 0 rgba(0, 0, 0, 0.06);
    }

    .disc {
      width: 84%;
      height: 84%;
      border-radius: 50%;
      box-shadow: inset 0 -6px 0 rgba(0, 0, 0, 0.15);
      pointer-events: none;
      animation: drop 0.2s ease-in;
    }

    @keyframes drop {
      from { transform: translateY(-20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    .red {
      background: linear-gradient(#ff6b6b, #c93b3b);
    }

    .yellow {
      background: linear-gradient(#ffd966, #f1c232);
    }

    .controls {
      background: #fff;
      padding: 12px;
      border-radius: 10px;
      box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06);
    }

    .tokens {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      align-items: center;
    }

    .token-card {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      padding: 8px;
      border-radius: 8px;
      flex: 1 1 120px;
    }

    .token-preview {
      width: 56px;
      height: 56px;
      border-radius: 50%;
    }

    .token-preview.red {
      background: linear-gradient(#ff6b6b, #c93b3b);
    }

    .token-preview.yellow {
      background: linear-gradient(#ffd966, #f1c232);
    }

    .selected {
      outline: 3px solid #55a;
      box-shadow: 0 4px 14px rgba(34, 106, 204, 0.18);
    }

    button {
      background: #2b6ea3;
      color: #fff;
      border: 0;
      padding: 8px 12px;
      border-radius: 8px;
      cursor: pointer;
    }

    button.secondary {
      background: #6b7280;
    }

    .win-text {
      font-size: 18px;
      font-weight: 700;
      color: #333;
      text-align: center;
      min-height: 28px;
    }

    @media (max-width: 768px) {
      :root { --cell-size: 50px; }
      .banner { max-height: 100px; }
    }

    @media (max-width: 480px) {
      :root { --cell-size: 40px; }
      .token-preview { width: 40px; height: 40px; }
      .banner { max-height: 80px; }
    }
  </style>
</head>
<body>

  <!-- Banner de sus -->
  <div class="banner">
    
  </div>

  <!-- Jocul principal -->
  <div class="main">
    <div class="board-wrap">
      <div style="display:flex;align-items:center;gap:12px;flex-wrap:wrap;justify-content:center;">
        <h2>Connect 4 (7x6)</h2>
        <button id="startBtn">Start</button>
        <button id="resetBtn" class="secondary">Reset</button>
      </div>

      <div class="top-row" id="topRow"></div>
      <div class="board" id="board"></div>
      <div id="winMessage" class="win-text"></div>
    </div>

    <div class="panel controls">
      <strong>Players & Tokens</strong>
      <div class="tokens">
        <div id="yellowCard" class="token-card">
          <div class="token-preview yellow"></div>
          <div><span id="yellowCount">21</span> yellow</div>
        </div>
        <div id="redCard" class="token-card">
          <div class="token-preview red"></div>
          <div><span id="redCount">21</span> red</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Banner de jos -->
  <div class="banner">
    
  </div>

<script>
const COLS = 7, ROWS = 6;
let board, counts, activeColor, gameOver, winHistory = 0;

const boardEl = document.getElementById('board');
const topRow = document.getElementById('topRow');
const winMessage = document.getElementById('winMessage');
const yellowCard = document.getElementById('yellowCard');
const redCard = document.getElementById('redCard');
const yellowCountEl = document.getElementById('yellowCount');
const redCountEl = document.getElementById('redCount');
const startBtn = document.getElementById('startBtn');
const resetBtn = document.getElementById('resetBtn');

function initBoard() {
  board = Array.from({length: ROWS}, ()=>Array(COLS).fill(null));
  counts = {yellow:21, red:21};
  gameOver = false;
  winMessage.textContent = '';
  renderBoard();
}

function renderBoard() {
  boardEl.innerHTML = '';
  for(let r=0; r<ROWS; r++) {
    for(let c=0; c<COLS; c++) {
      const cell = document.createElement('div');
      cell.className = 'cell';
      cell.dataset.col = c;
      const slot = document.createElement('div');
      slot.className = 'slot';
      const v = board[r][c];
      if(v){
        const disc = document.createElement('div');
        disc.className = `disc ${v}`;
        slot.appendChild(disc);
      }
      cell.appendChild(slot);
      cell.addEventListener('click', ()=>dropDisc(c));
      boardEl.appendChild(cell);
    }
  }
}

function renderTopRow() {
  topRow.innerHTML = '';
  for(let i=0;i<COLS;i++){
    const cell = document.createElement('div');
    cell.className = 'top-cell';
    const slot = document.createElement('div');
    slot.className = 'slot';
    cell.appendChild(slot);
    topRow.appendChild(cell);
  }
}

function dropDisc(col) {
  if(gameOver || !activeColor) return;
  const row = findLowestEmptyRow(col);
  if(row === -1) return;
  if(counts[activeColor] <= 0) return;
  board[row][col] = activeColor;
  counts[activeColor]--;
  updateCounts();
  renderBoard();
  if(checkWinner(activeColor)){
    declareWinner(activeColor);
    return;
  }
  activeColor = activeColor === 'yellow' ? 'red' : 'yellow';
  updateActiveCard();
}

function findLowestEmptyRow(col) {
  for(let r=ROWS-1; r>=0; r--){
    if(board[r][col]===null) return r;
  }
  return -1;
}

function checkWinner(color){
  const dirs = [[0,1],[1,0],[1,1],[1,-1]];
  for(let r=0;r<ROWS;r++){
    for(let c=0;c<COLS;c++){
      if(board[r][c]!==color) continue;
      for(const [dr,dc] of dirs){
        let count=1;
        for(let k=1;k<4;k++){
          const nr=r+dr*k, nc=c+dc*k;
          if(nr<0||nr>=ROWS||nc<0||nc>=COLS) break;
          if(board[nr][nc]===color) count++;
          else break;
        }
        if(count>=4) return true;
      }
    }
  }
  return false;
}

function declareWinner(color){
  gameOver = true;
  winMessage.textContent = `${color === 'yellow' ? 'Yellow' : 'Red'} wins!`;

  if(winHistory < COLS){
    const slot = topRow.children[winHistory].querySelector('.slot');
    slot.innerHTML = '';
    const disc = document.createElement('div');
    disc.className = `disc ${color}`;
    slot.appendChild(disc);
    winHistory++;
  }

  setTimeout(startNextRound, 1500);
}

function startNextRound(){
  initBoard();
  updateCounts();
  activeColor = 'yellow';  // runda nouă începe mereu cu galben
  updateActiveCard();
}

function updateCounts(){
  yellowCountEl.textContent = counts.yellow;
  redCountEl.textContent = counts.red;
}

function updateActiveCard(){
  yellowCard.classList.toggle('selected', activeColor==='yellow');
  redCard.classList.toggle('selected', activeColor==='red');
}

startBtn.addEventListener('click', ()=>{
  renderTopRow();
  initBoard();
  activeColor = 'yellow';
  updateActiveCard();
  updateCounts();
});

resetBtn.addEventListener('click', ()=>{
  winHistory = 0;
  renderTopRow();
  initBoard();
  activeColor = 'yellow';
  updateActiveCard();
  updateCounts();
});

renderTopRow();
initBoard();
updateCounts();
</script>
</body>
</html>
